<app-loader *ngIf="block" [mode]="mode" [value]="value" [diameter]="48">
</app-loader>
<h2>{{'result.title' | translate}}</h2>
<mat-card class="pv">
  <mat-accordion>
    <mat-expansion-panel [expanded]="expanded">
      <mat-expansion-panel-header>
        <mat-panel-title>
          {{'result.edit' | translate}}
        </mat-panel-title>
        <mat-panel-description>
          {{'result.edit_description' | translate}}
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div class="container">
        <mat-form-field>
          <input [(ngModel)]="from" matInput
                 placeholder="{{'result.from' | translate}}" required [matDatepicker]="picker">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker touchUi #picker></mat-datepicker>
        </mat-form-field>
        <br>
        <mat-form-field>
          <input [(ngModel)]="to" matInput
                 placeholder="{{'result.to' | translate}}" required [matDatepicker]="picker2">
          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
          <mat-datepicker touchUi #picker2></mat-datepicker>
        </mat-form-field>
        <br>
        <mat-radio-group class="example-radio-group" [(ngModel)]="statType">
          <mat-radio-button class="example-radio-button" *ngFor="let type of types" [value]="type">
            {{'result.' + type | translate}}
          </mat-radio-button>
        </mat-radio-group>
      </div>
    </mat-expansion-panel>
  </mat-accordion>
  <br>
  <button [disabled]="!from || !to || !statType" class="pull-right print" (click)="stat()" mat-button>
    <span class="glyphicon glyphicon-stats"></span>
  </button>
  <h2 *ngIf="chartData.length">{{'result.result' | translate}}</h2>
  <h2 *ngIf="chartData.length === 0">{{'messages.no_result' | translate}}</h2>
  <mat-radio-group [(ngModel)]="type">
    <mat-radio-button style="margin-right: 3px; font-size: 1.2rem" value="list">{{'result.list' | translate}}</mat-radio-button>
    <mat-radio-button style="font-size: 1.2rem" value="graph">{{'result.graph' | translate}}</mat-radio-button>
  </mat-radio-group>
</mat-card>
<app-chart *ngIf="chartData.length && type==='graph'" [chartData]="chartData" [chartLabels]="chartLabels" [chartType]="chartType" [title]="title"></app-chart>
<mat-card *ngIf="chartData.length && type==='list'">
  <app-abstract-table [page]="'result'" [setting]="setting" [data]="data"></app-abstract-table>
</mat-card>
